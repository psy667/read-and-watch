(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{161:function(e,t,n){e.exports=n(321)},171:function(e,t,n){},173:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},230:function(e,t,n){},309:function(e,t,n){},310:function(e,t,n){},311:function(e,t,n){},312:function(e,t,n){},319:function(e,t,n){},321:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(6),c=n.n(o),i=n(61),u=n(58),s=(n(170),n(37));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach(function(t){Object(s.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f={list:[],newRecord:{title:null,description:"",type:"book",tags:[]},showForm:!1};function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var m={list:["\u0425\u0443\u0434\u043e\u0436\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u0430\u044f \u043b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u0430","20-\u044b\u0439 \u0432\u0435\u043a","\u0410\u043d\u0442\u0438\u0443\u0442\u043e\u043f\u0438\u044f"]},v=Object(u.b)({records:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECORDS_LIST_UPDATE":return p({},e,{list:t.payload.records});case"RECORDS_LIST_SET_STATUS":var n=t.payload,r=n.id,a=n.currentStatus,o=e.list.map(function(e){return e.id===r?p({},e,{status:"complete"===a?"incomplete":"complete"}):e});return p({},e,{list:o});case"RECORD_CREATE_SET_VALUE":var c=t.payload,i=c.key,u=c.value;return["title","description","type","tags","link"].includes(i)?p({},e,{newRecord:p({},e.newRecord,Object(s.a)({},i,u))}):e;case"RECORD_EDIT":return p({},e,{newRecord:t.payload.record,showForm:!0});case"FORM_CLOSE":return p({},e,{showForm:!1,newRecord:{title:null,description:"",type:"book",tags:[]}});case"FORM_OPEN":return p({},e,{showForm:!0});default:return e}},tags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TAGS_LIST_UPDATE":return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach(function(t){Object(s.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{list:t.payload.tags.map(function(e){return e.id})});default:return e}}}),h=n(155),g=n(47),b=(n(171),n(2)),w=n.n(b),y=n(62),O=n(20),E=n.n(O),j=n(35),S=n(158);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach(function(t){Object(s.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function D(){return P.apply(this,arguments)}function P(){return(P=Object(j.a)(E.a.mark(function e(){var t;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(S.a)("read-and-watch",1,{upgrade:function(e){e.createObjectStore("records",{keyPath:"id",autoIncrement:!0}).createIndex("date","date"),e.createObjectStore("tags",{keyPath:"id",autoIncrement:!0})}}),e.abrupt("return",t);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var C=function(){var e=Object(j.a)(E.a.mark(function e(t){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D().then(function(e){return e.delete("records",t)}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(j.a)(E.a.mark(function e(t){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D().then(function(e){return e.put("records",t)}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(j.a)(E.a.mark(function e(t){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.id){e.next=2;break}return e.abrupt("return",D().then(function(e){return e.put("records",t)}));case 2:return n=k({},t,{date:(new Date).getTime(),status:"incomplete"}),e.abrupt("return",D().then(function(e){e.add("records",n)}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(j.a)(E.a.mark(function e(t){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D().then(function(e){return e.put("tags",t)}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(j.a)(E.a.mark(function e(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D().then(function(e){return e.getAll("records")}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(j.a)(E.a.mark(function e(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D().then(function(e){return e.getAll("tags")}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),F=n(156),I=n(323),U=n(322),x=n(329),V=n(96),B=(n(173),I.a.Text),M=I.a.Title,W=function(e){var t=e.title,n=e.description,o=e.type,c=e.date,i=e.status,u=e.tags,s=e.onStatusChange,l=e.onDelete,p=e.onEdit,f=Object(r.useState)(!1),d=Object(F.a)(f,2),m=d[0],v=d[1];return a.a.createElement(U.a,{className:w()("record",{"full-info":m}),onMouseEnter:function(){return v(!0)},onMouseLeave:function(){return v(!1)}},a.a.createElement("div",{className:"header"},a.a.createElement("div",{className:"tag-wrapper"},a.a.createElement(x.a,{color:"#108ee9"},o.toUpperCase()),a.a.createElement(x.a,{color:"complete"===i?"green":"volcano",onClick:s},i.toUpperCase())),a.a.createElement("div",{className:"button-wrapper"},a.a.createElement(V.a,{type:"normal",shape:"circle",icon:"edit",size:"small",onClick:p}),a.a.createElement(V.a,{type:"normal",shape:"circle",icon:"close",size:"small",onClick:l}))),a.a.createElement(M,{level:4},t),a.a.createElement(B,{className:"description"},n),a.a.createElement("div",{className:"tags"},u.map(function(e){return a.a.createElement(x.a,{key:e},e)})),a.a.createElement(B,{className:"date",type:"secondary"},new Date(c).toLocaleDateString("ru-ru")))},z=function(e){return{type:"RECORDS_LIST_UPDATE",payload:{records:e}}},X=function(e){return{type:"TAGS_LIST_UPDATE",payload:{tags:e}}};n(228);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var J={toggleStatus:function(e,t){return{type:"RECORDS_LIST_SET_STATUS",payload:{id:e,currentStatus:t}}},setNewRecordsList:z,editRecord:function(e){return{type:"RECORD_EDIT",payload:{record:e}}},setNewTagsList:X},$=Object(i.b)(function(e){return{records:e.records.list,tags:e.tags.list,showForm:e.records.showForm}},J)(function(e){var t=e.records,n=e.setNewRecordsList,o=e.editRecord,c=e.setNewTagsList,i=e.showForm,u=function(){L().then(function(e){return n(e)}),A().then(function(e){return c(e)})};Object(r.useEffect)(u,[]);var l=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach(function(t){Object(s.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{status:"complete"===t.status?"incomplete":"complete"});T(n).then(u)};return a.a.createElement("div",{className:w()("record-list",{"show-form":i})},t.map(function(e){return a.a.createElement(W,{key:e.id,title:e.title,description:e.description,type:e.type,date:e.date,tags:e.tags,link:e.link,status:e.status,onStatusChange:function(){return l(e.id,e)},onDelete:function(){return t=e.id,void C(t).then(u);var t},onEdit:function(){return o(e)}})}),0===t.length&&a.a.createElement(y.a,null))}),q=(n(229),n(324)),H=n(326),K=(n(230),function(e){var t=e.onChange,n=e.value;return a.a.createElement("div",{className:"input-type"},a.a.createElement(q.a.Item,null,a.a.createElement(H.a.Group,{onChange:function(e){return t(e.target.value)},defaultValue:n,buttonStyle:"solid"},a.a.createElement(H.a.Button,{value:"book"},"Book"),a.a.createElement(H.a.Button,{value:"article"},"Article"),a.a.createElement(H.a.Button,{value:"movie"},"Movie"),a.a.createElement(H.a.Button,{value:"video"},"Video"))))}),Q=n(328),Y=(n(309),function(e){var t=e.onChange,n=e.value;return a.a.createElement(q.a.Item,{label:"Title"},a.a.createElement(Q.a,{value:n,onChange:function(e){return t(e.target.value)}}))}),Z=(n(310),Q.a.TextArea),ee=function(e){var t=e.onChange,n=e.value;return a.a.createElement(q.a.Item,{label:"Description"},a.a.createElement(Z,{value:n,onChange:function(e){return t(e.target.value)},autosize:!0}))},te=(n(311),function(e){var t=e.onChange,n=e.value;return a.a.createElement(q.a.Item,{label:"Link"},a.a.createElement(Q.a,{value:n,onChange:function(e){return t(e.target.value)}}))}),ne=n(325),re=(n(312),ne.a.Option),ae=function(e){var t=e.onChange,n=e.children,r=e.value;return a.a.createElement(q.a.Item,{label:"Tags"},a.a.createElement(ne.a,{mode:"tags",style:{width:"100%"},placeholder:"Please select",onChange:function(e){return t(e)},value:r},n.map(function(e){return a.a.createElement(re,{key:e,value:e},e)})))},oe=n(327),ce=(n(319),function(e){var t=e.onCreate,n=e.newRecordData,r=e.children,o=e.visible,c=e.closeForm;return a.a.createElement(oe.a,{title:"Add new record",placement:"bottom",height:400,visible:o,onClose:c},a.a.createElement(q.a,{onSubmit:function(e){e.preventDefault(),t(n)}},r,a.a.createElement(V.a,{className:"button-save",type:"primary",htmlType:"submit",block:!0,disabled:!n.title},"Save")))}),ie={setValueNewRecord:function(e,t){return{type:"RECORD_CREATE_SET_VALUE",payload:{key:e,value:t}}},closeForm:function(){return{type:"FORM_CLOSE"}},openForm:function(){return{type:"FORM_OPEN"}},setNewRecordsList:z,setNewTagsList:X},ue=Object(i.b)(function(e){return{newRecord:e.records.newRecord,tags:e.tags.list,showForm:e.records.showForm}},ie)(function(e){var t=e.setValueNewRecord,n=e.newRecord,r=e.tags,o=e.showForm,c=e.closeForm,i=e.openForm,u=e.setNewRecordsList,s=e.setNewTagsList;return a.a.createElement("div",{className:"create-record"},a.a.createElement("div",{className:"button-wrapper"},a.a.createElement(V.a,{type:"primary",block:!0,icon:"plus-circle",size:"large",onClick:i},"Add new record")),a.a.createElement(ce,{newRecordData:n,onCreate:function(e){e.tags.map(function(e){return N({id:e,value:e})}),_(e).then(function(){L().then(function(e){return u(e)}),A().then(function(e){return s(e)}),c()})},visible:o,closeForm:c},a.a.createElement(K,{value:n.type,onChange:function(e){return t("type",e)}}),["video","article"].includes(n.type)?a.a.createElement(te,{onChange:function(e){return t("link",e)}}):null,a.a.createElement(Y,{value:n.title,onChange:function(e){return t("title",e)}}),a.a.createElement(ee,{value:n.description,onChange:function(e){return t("description",e)}}),a.a.createElement(ae,{value:n.tags,onChange:function(e){return t("tags",e)}},r)))});var se=function(){return a.a.createElement("div",null,a.a.createElement($,null),a.a.createElement(ue,null))};var le=function(){return a.a.createElement("div",null,a.a.createElement(h.a,null,a.a.createElement(g.a,{path:"/",exact:!0,component:se})))},pe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function fe(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var de=Object(u.c)(v,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(a.a.createElement(i.a,{store:de},a.a.createElement(le,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");pe?(function(e,t){fetch(e).then(function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):fe(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):fe(t,e)})}}()}},[[161,1,2]]]);
//# sourceMappingURL=main.a6c812dc.chunk.js.map